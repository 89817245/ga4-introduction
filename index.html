<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GA4 互動式指南</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Application Structure Plan: A tab-based SPA. Each tab corresponds to a major section of the GA4 report (e.g., '總覽', 'GA4 vs UA', '核心架構', '主要功能', '開始使用', '報表與分析', '遷移與未來', '學習資源'). This structure allows users to navigate directly to topics of interest, enhancing usability for a dense informational report. Key interactions include:
        - Tab navigation to switch content views.
        - Interactive comparison table for 'UA 與 GA4 功能與指標比較表' where rows can be clicked to reveal more details or highlight differences.
        - Clickable cards for 'GA4 事件類型表' to show detailed information for each event type.
        - A Chart.js bar chart to visually compare a key metric difference between UA and GA4.
        - Expandable sections for detailed textual content to keep the initial view clean.
        The user flow is non-linear, driven by user choice via the tab navigation. Each section will have a brief introduction derived from the report.
    -->
    <!-- Visualization & Content Choices:
        - Section 1 (總覽): Textual content explaining GA4 and its necessity. Goal: Inform. Presentation: HTML text blocks. Interaction: None.
        - Section 2 (GA4 vs UA):
            - 'UA 與 GA4 功能與指標比較表': Report Info: Table comparing features/metrics. Goal: Compare. Viz/Presentation: Interactive HTML table (Tailwind styled, JS for click-to-expand/highlight detail). Interaction: Row click. Justification: Clear, interactive comparison.
            - Metric Difference (e.g., Users): Report Info: Text on 'User' metric differences. Goal: Illustrate difference. Viz: Chart.js Bar Chart. Interaction: Hover tooltips. Justification: Simple visual for quantitative difference.
        - Section 3 (核心架構):
            - 'GA4 事件類型表': Report Info: Table of event types. Goal: Detail event types. Viz/Presentation: Interactive HTML cards (Tailwind). Interaction: Click card to show details. Justification: Engaging way to present structured text.
        - Section 4 (主要功能): Textual lists and descriptions for features like Privacy, AI/ML, etc. Goal: Inform. Presentation: HTML text, possibly with icons (Unicode). Interaction: Expandable sections for details.
        - Section 5 (開始使用): Textual steps for setup, UI overview (conceptual HTML/Tailwind layout). Goal: Guide. Presentation: HTML lists, simple layout. Interaction: Minimal, maybe hover on UI mockup.
        - Section 6 (報表與分析): Textual descriptions of reports, Explore section, e-commerce. Conceptual funnel (HTML/CSS bars). Goal: Introduce analysis. Presentation: HTML text, simple visual. Interaction: None.
        - Section 7 (遷移與未來): Textual content on migration and outlook. Goal: Advise. Presentation: HTML text. Interaction: None.
        - Section 8 (學習資源): List of links. Goal: Resource. Presentation: HTML links. Interaction: Click to open new tab.
        - All textual content adapted from the source report.
    -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .tab-button.active { background-color: #0284c7; color: white; }
        .tab-button { transition: background-color 0.3s ease; }
        .details-row { display: none; }
        .details-row.visible { display: table-row; }
        .comparison-table tr:not(.details-row):hover { background-color: #f0f9ff; cursor: pointer; }
        .event-card { cursor: pointer; transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .event-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .event-card-details { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out; }
        .event-card.open .event-card-details { max-height: 1000px; /* Adjust as needed */ }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }

        .info-icon {
            display: inline-block;
            width: 1.25rem;
            height: 1.25rem;
            line-height: 1.25rem;
            text-align: center;
            border-radius: 50%;
            background-color: #38bdf8; /* sky-500 */
            color: white;
            font-weight: bold;
            cursor: default;
            margin-right: 0.5rem;
            font-style: normal;
        }
         .feature-item h4 {
            display: flex;
            align-items: center;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-700 antialiased">
    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="mb-8 text-center">
            <h1 class="text-3xl sm:text-4xl font-bold text-sky-700">Google Analytics 4：互動式指南</h1>
            <p class="mt-2 text-lg text-slate-600">引領數位洞察新未來</p>
        </header>

        <nav class="mb-8 flex flex-wrap justify-center gap-2">
            <button class="tab-button active text-sm sm:text-base bg-white hover:bg-sky-100 text-sky-700 font-semibold py-2 px-4 border border-sky-200 rounded-lg shadow" onclick="openTab(event, 'tab1')">總覽</button>
            <button class="tab-button text-sm sm:text-base bg-white hover:bg-sky-100 text-sky-700 font-semibold py-2 px-4 border border-sky-200 rounded-lg shadow" onclick="openTab(event, 'tab2')">GA4 vs UA</button>
            <button class="tab-button text-sm sm:text-base bg-white hover:bg-sky-100 text-sky-700 font-semibold py-2 px-4 border border-sky-200 rounded-lg shadow" onclick="openTab(event, 'tab3')">核心架構</button>
            <button class="tab-button text-sm sm:text-base bg-white hover:bg-sky-100 text-sky-700 font-semibold py-2 px-4 border border-sky-200 rounded-lg shadow" onclick="openTab(event, 'tab4')">主要功能</button>
            <button class="tab-button text-sm sm:text-base bg-white hover:bg-sky-100 text-sky-700 font-semibold py-2 px-4 border border-sky-200 rounded-lg shadow" onclick="openTab(event, 'tab5')">開始使用</button>
            <button class="tab-button text-sm sm:text-base bg-white hover:bg-sky-100 text-sky-700 font-semibold py-2 px-4 border border-sky-200 rounded-lg shadow" onclick="openTab(event, 'tab6')">報表與分析</button>
            <button class="tab-button text-sm sm:text-base bg-white hover:bg-sky-100 text-sky-700 font-semibold py-2 px-4 border border-sky-200 rounded-lg shadow" onclick="openTab(event, 'tab7')">遷移與未來</button>
            <button class="tab-button text-sm sm:text-base bg-white hover:bg-sky-100 text-sky-700 font-semibold py-2 px-4 border border-sky-200 rounded-lg shadow" onclick="openTab(event, 'tab8')">學習資源</button>
        </nav>

        <main class="bg-white p-6 rounded-lg shadow-xl">
            <div id="tab1" class="tab-content active">
                <h2 class="text-2xl font-semibold text-sky-600 mb-4">第 1 部分：GA4：次世代網站分析工具</h2>
                <p class="mb-4">本節旨在介紹 Google Analytics 4 (GA4)，闡述其基本目的以及採用的迫切性。</p>
                
                <div class="mb-6 p-4 border-l-4 border-sky-500 bg-sky-50 rounded">
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">1.1 什麼是 Google Analytics 4？核心目標與定義</h3>
                    <p class="mb-2">Google Analytics 4 (GA4) 是 Google 最新的分析平台，設計用於全面追蹤網站和應用程式的使用者互動。其核心目標是協助使用者了解人們如何與其平台互動，從而調整行銷策略以提升參與度和使用者體驗。</p>
                    <p class="mb-2">GA4 不僅僅是通用版 Analytics (UA) 的更新，而是一個徹底重新建構的分析工具，旨在以使用者為中心，採用事件型衡量模型，以適應不斷變化的數位環境，並著重於跨多個平台和裝置的完整顧客旅程。此平台被設計為具有前瞻性，能夠應對未來的分析挑戰。</p>
                    <p>相較於其前身，GA4 旨在提供更精確的資料收集能力和更完善的使用者隱私保護措施。GA4 的定義突顯了從被動資料收集轉向為主動產生洞察以進行優化。</p>
                </div>

                <div class="mb-6 p-4 border-l-4 border-amber-500 bg-amber-50 rounded">
                    <h3 class="text-xl font-semibold text-amber-700 mb-2">1.2 為何選擇 GA4？通用版 Analytics 的淘汰與數位環境的演進</h3>
                    <p class="mb-2"><strong>通用版 Analytics (UA) 已經停止服務：</strong>UA 資源從 2023 年 7 月 1 日起已停止處理新資料，Google 將從 2024 年 7 月 1 日開始刪除所有 UA 資料。因此，遷移至 GA4 已非選擇，而是勢在必行。</p>
                    <p class="mb-2">數位環境的快速變遷是推動此轉變的關鍵因素。日益增長的使用者隱私考量、法規實施、第三方 Cookie 的式微，以及使用者跨多裝置的複雜旅程，都使得 UA 的效能逐漸降低。</p>
                    <p>GA4 正是為應對這些現代挑戰而設計，採用以隱私為中心、事件驅動的模型。UA 的淘汰不僅是一個技術上的截止日期，更是企業採納更現代化、注重隱私且以使用者為中心的分析方法的催化劑。</p>
                    <p class="mt-2 font-semibold">因果關係：不斷演進的隱私環境與多裝置使用 → UA 的局限性 → GA4 的開發 → UA 的淘汰 → 強制採用 GA4。</p>
                </div>
                 <div class="mt-6 p-4 bg-slate-100 rounded-lg">
                    <h3 class="text-lg font-semibold text-slate-700 mb-2">今日重點議程：</h3>
                    <ul class="list-disc list-inside space-y-1 text-slate-600">
                        <li>GA4 簡介：是什麼與為什麼</li>
                        <li>GA4 與通用版 Analytics (UA) 的主要差異</li>
                        <li>核心架構：事件、參數、資料串流</li>
                        <li>主要功能與優勢</li>
                        <li>開始使用：設定與介面概覽</li>
                        <li>GA4 報表與分析初探</li>
                        <li>遷移至 GA4 與未來展望</li>
                        <li>學習資源與問答</li>
                    </ul>
                </div>
            </div>

            <div id="tab2" class="tab-content">
                <h2 class="text-2xl font-semibold text-sky-600 mb-4">第 2 部分：理解轉變：GA4 與通用版 Analytics (UA)</h2>
                <p class="mb-4">本節旨在清楚闡述 GA4 與 UA 之間的根本差異，特別著重於資料模型和關鍵指標的變化。</p>

                <div class="mb-6 p-4 border-l-4 border-sky-500 bg-sky-50 rounded">
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">2.1 根本差異：不僅僅是升級</h3>
                    <p>GA4 是對網站分析的徹底重新構想，而非僅僅是 UA 的增量更新。兩者在資料模型、指標、裝置追蹤、隱私控制、顧客旅程分析、轉換追蹤、資料設定和報表功能等多個關鍵領域存在顯著差異。這不僅是學習新功能，更需要分析思維和方法的轉變。</p>
                </div>
                
                <div class="mb-6 p-4 border-l-4 border-sky-500 bg-sky-50 rounded">
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">2.2 資料模型：事件型 (GA4) vs. 工作階段型 (UA)</h3>
                    <p class="mb-2"><strong>通用版 Analytics (UA):</strong> 採用以工作階段 (session) 為基礎的資料模型，事件是一種獨立的命中類型，具有固定的「類別」、「動作」和「標籤」欄位。</p>
                    <p><strong>Google Analytics 4 (GA4):</strong> 引入以事件 (event) 為基礎的資料模型。每一次使用者互動都被視為獨立事件，使用彈性的「參數」提供情境資訊。此模型本質上「扁平化」且更具適應性，實現網站和應用程式間的一致追蹤。</p>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">2.3 主要指標變化示意：使用者數量</h3>
                    <p class="mb-2 text-sm text-slate-600">UA 主要關注「總使用者數」，而 GA4 側重於「活躍使用者數」。兩者定義不同，GA4 的活躍使用者數可能較 UA 的總使用者數低。下圖僅為概念示意，實際差異視情況而定。</p>
                    <div class="chart-container bg-slate-50 p-4 rounded-lg">
                        <canvas id="userMetricsChart"></canvas>
                    </div>
                </div>
                
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">UA 與 GA4 功能與指標比較表</h3>
                    <p class="mb-3 text-sm text-slate-600">點擊表格中的項目以查看簡要說明。</p>
                    <div class="overflow-x-auto">
                        <table id="uaGa4ComparisonTable" class="comparison-table min-w-full bg-white border border-slate-200 rounded-lg shadow">
                            <thead class="bg-sky-100">
                                <tr>
                                    <th class="py-3 px-4 border-b text-left text-sm font-semibold text-sky-700">功能/指標</th>
                                    <th class="py-3 px-4 border-b text-left text-sm font-semibold text-sky-700 hidden md:table-cell">通用版 Analytics (UA)</th>
                                    <th class="py-3 px-4 border-b text-left text-sm font-semibold text-sky-700 hidden md:table-cell">Google Analytics 4 (GA4)</th>
                                </tr>
                            </thead>
                            <tbody>
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="tab3" class="tab-content">
                <h2 class="text-2xl font-semibold text-sky-600 mb-4">第 3 部分：深入剖析 GA4 核心架構</h2>
                <p class="mb-4">本節旨在闡釋構成 GA4 資料收集基礎的關鍵元素：事件、參數、使用者屬性以及資料串流。</p>

                <div class="mb-6 p-4 border-l-4 border-sky-500 bg-sky-50 rounded">
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">3.1 事件驅動的資料模型：事件、參數、使用者屬性</h3>
                    <p class="mb-2">GA4 的核心架構是以事件為基礎。所有使用者互動都被記錄為「事件」。</p>
                    <p class="mb-2"><strong>參數 (Parameters):</strong> 提供事件額外情境資訊的鍵值對，用於填充報表中的維度和指標。</p>
                    <p><strong>使用者屬性 (User Properties):</strong> 描述使用者群體特徵的屬性 (如語言、國家)，用於建立目標對象和市場區隔。</p>
                </div>

                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-3">GA4 事件類型</h3>
                    <p class="mb-4 text-sm text-slate-600">點擊下方的事件類型卡片以了解更多詳情。</p>
                    <div id="eventTypesContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        </div>
                </div>
                 <div class="mt-6 p-4 border-l-4 border-sky-500 bg-sky-50 rounded">
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">3.2 資料串流：整合網站與應用程式分析</h3>
                    <p class="mb-2">資料串流 (Data Streams) 是將來自您各種數位平台（網站、iOS 應用程式、Android 應用程式）的資料匯入 GA4 資源的管道。一個 GA4 資源可以包含多個資料串流，實現跨平台的統一追蹤。</p>
                    <p>每個資料串流都有一個獨特的「評估 ID」(Measurement ID, G-XXXXXXXXXX)，用於追蹤程式碼中，確保資料正確傳送。</p>
                </div>
            </div>

            <div id="tab4" class="tab-content">
                <h2 class="text-2xl font-semibold text-sky-600 mb-4">第 4 部分：GA4 的主要功能與優勢</h2>
                <p class="mb-6">本節旨在強調 GA4 相較於 UA 所提供的最具影響力的功能和顯著優勢。</p>
            
                <div class="space-y-6">
                    <div class="feature-item p-4 border border-slate-200 rounded-lg shadow-sm hover:shadow-md transition-shadow">
                        <h4 class="text-lg font-semibold text-sky-700 mb-1"><span class="info-icon">🔒</span>增強的隱私功能</h4>
                        <ul class="list-disc list-inside text-slate-600 space-y-1 pl-4 text-sm">
                            <li>Google 同意聲明模式：根據使用者同意調整行為，可發送無 Cookie ping。</li>
                            <li>行為和轉換模擬：利用機器學習填補因使用者未同意 Cookie 造成的數據缺口。</li>
                            <li>資料刪除選項與資料編校：增強資料控管與 PII 保護。</li>
                        </ul>
                        <p class="text-xs text-slate-500 mt-2">GA4 旨在建立使用者信任並確保分析在注重隱私的世界中的長期可行性。</p>
                    </div>
            
                    <div class="feature-item p-4 border border-slate-200 rounded-lg shadow-sm hover:shadow-md transition-shadow">
                        <h4 class="text-lg font-semibold text-sky-700 mb-1"><span class="info-icon">🔄</span>全面的跨平台與跨網域追蹤</h4>
                        <ul class="list-disc list-inside text-slate-600 space-y-1 pl-4 text-sm">
                            <li>使用者身份識別方法：User ID、Google 信號、裝置 ID、模擬分析。</li>
                            <li>跨網域追蹤：透過網址參數傳遞客戶/工作階段 ID，準確歸因。</li>
                        </ul>
                        <p class="text-xs text-slate-500 mt-2">GA4 提供解決方案以理解在多裝置、多平台世界中完整但分散的顧客旅程。</p>
                    </div>
            
                    <div class="feature-item p-4 border border-slate-200 rounded-lg shadow-sm hover:shadow-md transition-shadow">
                        <h4 class="text-lg font-semibold text-sky-700 mb-1"><span class="info-icon">💡</span>AI 與機器學習：預測性分析</h4>
                        <ul class="list-disc list-inside text-slate-600 space-y-1 pl-4 text-sm">
                            <li>預測性指標：購買機率、流失機率、預期收益。</li>
                            <li>預測性目標對象：根據預測性指標建立目標對象 (如「未來7天內可能購買者」)。</li>
                            <li>使用案例：精準廣告投放、主動顧客挽留、個人化優惠。</li>
                        </ul>
                        <p class="text-xs text-slate-500 mt-2">將 GA4 從歷史報表工具轉變為具前瞻性的策略資產。</p>
                    </div>
            
                    <div class="feature-item p-4 border border-slate-200 rounded-lg shadow-sm hover:shadow-md transition-shadow">
                        <h4 class="text-lg font-semibold text-sky-700 mb-1"><span class="info-icon">🔗</span>強大的整合功能：Google Ads 與 BigQuery</h4>
                        <ul class="list-disc list-inside text-slate-600 space-y-1 pl-4 text-sm">
                            <li>Google Ads 整合：共享主要事件 (轉換) 與目標對象，檢視完整顧客週期。</li>
                            <li>BigQuery 整合：免費匯出原始、未取樣的事件層級資料，進行進階分析與資料倉儲。</li>
                        </ul>
                        <p class="text-xs text-slate-500 mt-2">將 GA4 轉變為更廣泛行銷資料生態系統的中央樞紐。</p>
                    </div>
                </div>
            </div>

            <div id="tab5" class="tab-content">
                <h2 class="text-2xl font-semibold text-sky-600 mb-4">第 5 部分：開始使用：GA4 設定與介面概覽</h2>
                <p class="mb-6">本節旨在提供建立 GA4 資源、設定資料收集以及導覽基本介面的高階概覽。</p>
            
                <div class="space-y-6">
                    <div>
                        <h3 class="text-xl font-semibold text-sky-700 mb-2">5.1 建立 GA4 資源與資料串流</h3>
                        <ol class="list-decimal list-inside space-y-1 text-slate-600 pl-4">
                            <li>進入 Google Analytics 管理介面，點擊「建立資源」。</li>
                            <li>輸入資源名稱、選擇報表時區和貨幣，提供業務資訊。</li>
                            <li>設定資料串流 (網站、iOS、Android)，輸入網址或套件 ID。</li>
                            <li>(網站) 啟用加強型評估 (Enhanced Measurement) 以自動追蹤常見互動。</li>
                            <li>取得評估 ID (Measurement ID, e.g., "G-XXXXXXXXXX")。</li>
                        </ol>
                        <p class="text-sm text-slate-500 mt-2">GA4 允許在單一資源下擁有多個資料串流，簡化跨平台資料匯總。</p>
                    </div>
            
                    <div>
                        <h3 class="text-xl font-semibold text-sky-700 mb-2">5.2 安裝追蹤碼：gtag.js 與 Google Tag Manager (GTM)</h3>
                        <p class="mb-2 text-slate-600">建議使用 Google Tag Manager (GTM) 進行安裝，以獲得更大的靈活性。</p>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="p-4 border border-slate-200 rounded-lg">
                                <h4 class="font-semibold text-sky-600">透過 GTM (建議)</h4>
                                <ol class="list-decimal list-inside space-y-1 text-sm text-slate-600 pl-4 mt-1">
                                    <li>在 GTM 建立新代碼，選擇「Google 代碼」。</li>
                                    <li>輸入 GA4「評估 ID」。</li>
                                    <li>設定觸發條件為「初始化 - 所有頁面」。</li>
                                    <li>提交並發佈 GTM 容器。</li>
                                </ol>
                            </div>
                            <div class="p-4 border border-slate-200 rounded-lg">
                                <h4 class="font-semibold text-sky-600">透過 gtag.js (手動)</h4>
                                <ol class="list-decimal list-inside space-y-1 text-sm text-slate-600 pl-4 mt-1">
                                    <li>在資料串流中複製 JavaScript 程式碼片段。</li>
                                    <li>貼到網站每個頁面的 `<head>` 元素之後。</li>
                                </ol>
                            </div>
                        </div>
                        <p class="text-sm text-slate-600 mt-2">安裝後，使用 DebugView 或即時報表驗證資料流入。</p>
                    </div>
            
                    <div>
                        <h3 class="text-xl font-semibold text-sky-700 mb-2">5.3 GA4 介面導覽 (概念)</h3>
                        <p class="mb-3 text-slate-600">GA4 介面圍繞使用者生命週期組織，並提供強大的「探索」功能。</p>
                        <div class="p-4 border-2 border-dashed border-sky-300 rounded-lg bg-sky-50">
                            <p class="text-sm font-semibold text-sky-700 mb-2">主要導覽面板 (左側邊欄 - 概念示意):</p>
                            <ul class="list-none space-y-1 text-sm text-slate-600">
                                <li class="p-2 hover:bg-sky-100 rounded cursor-pointer">🏠 首頁 (Home) - 可自訂總覽</li>
                                <li class="p-2 hover:bg-sky-100 rounded cursor-pointer">📊 報表 (Reports) - 標準報表 (生命週期、使用者集合)</li>
                                <li class="p-2 hover:bg-sky-100 rounded cursor-pointer">🔍 探索 (Explore) - 自訂深度分析</li>
                                <li class="p-2 hover:bg-sky-100 rounded cursor-pointer">📢 廣告 (Advertising) - 廣告成效與歸因</li>
                                <li class="p-2 hover:bg-sky-100 rounded cursor-pointer">⚙️ 管理 (Admin) - 設定、整合、控管</li>
                            </ul>
                            <p class="text-xs text-slate-500 mt-3">實際介面包含更多細節。熟悉「探索」區塊對充分發揮 GA4 能力至關重要。</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab6" class="tab-content">
                <h2 class="text-2xl font-semibold text-sky-600 mb-4">第 6 部分：GA4 報表與分析初探</h2>
                <p class="mb-6">本節旨在介紹 GA4 中主要的報表類型和分析技術。</p>
            
                <div class="space-y-6">
                    <div>
                        <h3 class="text-xl font-semibold text-sky-700 mb-2">6.1 標準報表：生命週期焦點</h3>
                        <p class="mb-3 text-slate-600">GA4 標準報表側重使用者生命週期，通常提供摘要層級資訊，引導使用者前往「探索」進行深入分析。</p>
                        <ul class="list-disc list-inside space-y-2 text-slate-600 pl-4">
                            <li><strong>即時報表:</strong> 監控過去 30 分鐘活動，驗證追蹤。</li>
                            <li><strong>客戶開發報表:</strong> 使用者如何被開發 (管道、來源/媒介)。</li>
                            <li><strong>參與報表:</strong> 使用者與內容的互動 (參與率、事件、瀏覽次數)。</li>
                            <li><strong>營利報表:</strong> 追蹤收益 (電子商務、應用程式內購、廣告)。</li>
                            <li><strong>回訪率報表:</strong> 使用者隨時間推移的回訪情況 (同類群組、LTV)。</li>
                        </ul>
                    </div>
            
                    <div>
                        <h3 class="text-xl font-semibold text-sky-700 mb-2">6.2 探索：釋放分析潛力</h3>
                        <p class="mb-3 text-slate-600">「探索」區塊是 GA4 的核心優勢，提供 UA 所缺乏的臨機操作分析彈性。</p>
                        <ul class="list-disc list-inside space-y-2 text-slate-600 pl-4">
                            <li><strong>任意形式探索:</strong> 高度自訂的表格和視覺化圖表。</li>
                            <li><strong>程序探索:</strong> 視覺化使用者完成任務的步驟與流失點。
                                <div class="my-2 p-3 border border-slate-200 rounded-md bg-slate-50">
                                    <p class="text-sm font-medium text-sky-600">概念：電子商務結帳程序</p>
                                    <div class="flex items-end space-x-1 mt-1 h-24">
                                        <div class="bg-sky-500 w-1/4 rounded-t-sm" style="height: 100%;"><span class="text-xs text-white p-1 block text-center">瀏覽</span></div>
                                        <div class="bg-sky-400 w-1/4 rounded-t-sm" style="height: 80%;"><span class="text-xs text-white p-1 block text-center">購物車</span></div>
                                        <div class="bg-sky-300 w-1/4 rounded-t-sm" style="height: 60%;"><span class="text-xs text-slate-700 p-1 block text-center">結帳</span></div>
                                        <div class="bg-sky-200 w-1/4 rounded-t-sm" style="height: 50%;"><span class="text-xs text-slate-700 p-1 block text-center">購買</span></div>
                                    </div>
                                    <p class="text-xs text-slate-500 mt-1">示意圖：長條高度代表各階段用戶比例。</p>
                                </div>
                            </li>
                            <li><strong>路徑探索:</strong> 以樹狀圖視覺化使用者旅程，發現主要路徑或事件影響。</li>
                            <li>其他技巧：區隔重疊、使用者多層檢視、同類群組探索等。</li>
                        </ul>
                        <p class="text-sm text-slate-500 mt-2">掌握「探索」功能是深入理解 GA4 資料的關鍵。</p>
                    </div>
            
                    <div>
                        <h3 class="text-xl font-semibold text-sky-700 mb-2">6.3 目標對象建立</h3>
                        <p class="text-slate-600">GA4 的目標對象建立工具比 UA 更強大，支援事件範圍條件、序列和預測功能。可用於分析及 Google Ads 再行銷。</p>
                    </div>
            
                    <div>
                        <h3 class="text-xl font-semibold text-sky-700 mb-2">6.4 電子商務追蹤基礎</h3>
                        <p class="text-slate-600">GA4 的事件型模型非常適合電子商務，透過特定建議事件 (如 `view_item`, `add_to_cart`, `purchase`) 和參數，詳細追蹤顧客購物旅程。營利報表提供產品成效、購買程序等洞察。</p>
                    </div>
                </div>
            </div>
            
            <div id="tab7" class="tab-content">
                <h2 class="text-2xl font-semibold text-sky-600 mb-4">第 7 部分：遷移至 GA4 與未來展望</h2>
                <p class="mb-6">本節旨在引導使用者完成從 UA 到 GA4 的遷移過程，解決常見挑戰，並提供對 GA4 未來網站分析發展的展望。</p>
            
                <div class="space-y-6">
                    <div>
                        <h3 class="text-xl font-semibold text-sky-700 mb-2">7.1 主要遷移步驟與最佳實務</h3>
                        <p class="mb-3 text-slate-600">遷移至 GA4 是重新思考和改進分析策略的機會。</p>
                        <ul class="list-disc list-inside space-y-1 text-slate-600 pl-4">
                            <li>稽核 UA 設定 (事件、目標、自訂維度/指標)。</li>
                            <li>使用 GA4 設定輔助程式建立新資源。</li>
                            <li>實行平行追蹤 (同時執行 UA 和 GA4)。</li>
                            <li>透過 GTM (建議) 或 gtag.js 實作 GA4 追蹤碼。</li>
                            <li>遷移/重新建立事件與轉換 (將重要事件標記為主要事件)。</li>
                            <li>設定自訂維度/指標、資料保留設定 (建議 14 個月)、篩選內部流量。</li>
                            <li>重新連結 Google Ads、Search Console、BigQuery。</li>
                            <li>使用 DebugView、即時報表等進行驗證與測試。</li>
                        </ul>
                        <p class="text-sm text-slate-500 mt-2">成功的遷移著重於未來需求和 GA4 的潛力，而不僅僅是複製過去。</p>
                    </div>
            
                    <div>
                        <h3 class="text-xl font-semibold text-sky-700 mb-2">7.2 常見遷移挑戰</h3>
                        <p class="mb-3 text-slate-600">挑戰多源於低估 UA 與 GA4 的根本差異及規劃不足。</p>
                        <ul class="list-disc list-inside space-y-1 text-slate-600 pl-4">
                            <li>資料模型差異 (命中 vs. 事件) 的學習曲線。</li>
                            <li>指標定義與比較的困難 (如使用者、工作階段、跳出率)。</li>
                            <li>適應新的報表介面與「探索」工具。</li>
                            <li>自訂事件/代碼設定錯誤。</li>
                            <li>過度依賴自動遷移，可能遺漏關鍵追蹤。</li>
                            <li>資料閾值/隱私導致小量資料報表數據隱藏。</li>
                            <li>資料保留預設值過短 (預設 2 個月)。</li>
                        </ul>
                         <p class="text-sm text-slate-500 mt-2">建議投資培訓、遵循詳細檢查清單、執行徹底 QA。</p>
                    </div>
            
                    <div>
                        <h3 class="text-xl font-semibold text-sky-700 mb-2">7.3 GA4 的網站分析未來展望</h3>
                        <p class="mb-3 text-slate-600">GA4 將日益利用 AI 並適應隱私需求，更像智慧洞察引擎。</p>
                        <ul class="list-disc list-inside space-y-1 text-slate-600 pl-4">
                            <li>增強的 AI/ML 整合 (預測性分析、自動化洞察)。</li>
                            <li>以隱私為中心的演進 (保護隱私的評估、伺服器端代碼)。</li>
                            <li>更深入的 Google Ads 與 GMP 整合。</li>
                            <li>跨平台統一的進一步改進。</li>
                            <li>進階分析與自訂工具的精進。</li>
                        </ul>
                        <p class="text-sm text-slate-500 mt-2">持續學習和適應將是 GA4 使用者的關鍵。</p>
                    </div>
                </div>
            </div>

            <div id="tab8" class="tab-content">
                <h2 class="text-2xl font-semibold text-sky-600 mb-4">第 8 部分：持續您的 GA4 之旅：學習資源</h2>
                <p class="mb-6">本節旨在為與會者提供進一步學習的資源。</p>
            
                <div class="space-y-6">
                    <div>
                        <h3 class="text-xl font-semibold text-sky-700 mb-2">8.1 官方 Google 文件與社群</h3>
                        <ul class="list-disc list-inside space-y-1 text-slate-600 pl-4">
                            <li><a href="https://support.google.com/analytics" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline">Google Analytics (分析) 說明中心</a> - 官方文件主要來源。</li>
                            <li><a href="https://developers.google.com/analytics" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline">Google Developers - Analytics (分析)</a> - 開發者文件。</li>
                            <li>Google Analytics (分析) 社群論壇 - 提問與解答。</li>
                            <li>Google Analytics (分析) Discord 群組 - 公告與開發者社群。</li>
                            <li><a href="https://www.youtube.com/user/googleanalytics" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline">Google Analytics (分析) YouTube 頻道</a> - 官方影片教學。</li>
                            <li><a href="https://skillshop.exceedlms.com/student/catalog/list?category_ids=53-google-analytics" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline">Google Skillshop</a> - GA4 免費課程與認證。</li>
                        </ul>
                    </div>
            
                    <div>
                        <h3 class="text-xl font-semibold text-sky-700 mb-2">8.2 推薦網誌與 YouTube 頻道</h3>
                        <div class="grid md:grid-cols-2 gap-x-8">
                            <div>
                                <h4 class="font-semibold text-slate-700 mb-1">網誌 (Blogs):</h4>
                                <ul class="list-disc list-inside space-y-1 text-slate-600 pl-4 text-sm">
                                    <li><a href="https://analytify.io/blog/" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline">Analytify Blog</a></li>
                                    <li><a href="https://measureschool.com/blog/" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline">MeasureSchool Blog</a></li>
                                    <li><a href="https://www.analyticsmania.com/blog/" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline">Analytics Mania Blog</a></li>
                                    <li><a href="https://www.lovesdata.com" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline">Loves Data</a></li>
                                    <li><a href="https://ga4.com" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline">GA4.com</a></li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-slate-700 mb-1">YouTube 頻道:</h4>
                                <ul class="list-disc list-inside space-y-1 text-slate-600 pl-4 text-sm">
                                    <li><a href="https://www.youtube.com/@MeasureSchool" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline">MeasureSchool</a></li>
                                    <li><a href="https://www.youtube.com/@LovesData" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline">Loves Data</a></li>
                                    <li><a href="https://www.youtube.com/@AnalyticsMania" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline">Analytics Mania</a></li>
                                </ul>
                            </div>
                        </div>
                         <p class="text-xs text-slate-500 mt-3">請注意：以上僅為部分資源，網路上有更多優質的 GA4 學習內容。</p>
                    </div>
                </div>
                 <div class="mt-8 p-6 bg-sky-50 border-t-4 border-sky-500 rounded-b-lg">
                    <h3 class="text-xl font-semibold text-sky-700 mb-3">總結</h3>
                    <p class="text-slate-600 mb-2">Google Analytics 4 代表了網站和應用程式分析領域的一次重大轉型。它以事件為基礎的資料模型、增強的隱私功能、跨平台追蹤能力、AI 整合以及與 Google 生態系統的緊密連結，為企業提供了前所未有的洞察力。</p>
                    <p class="text-slate-600">成功擁抱 GA4 不僅是技術升級，更是分析思維和策略的革新。透過持續學習和實踐，企業可以充分發揮 GA4 的潛力，從數據中提煉出驅動業務成長的深刻洞察。</p>
                </div>
            </div>

        </main>

        <footer class="mt-12 text-center text-sm text-slate-500">
            <p>&copy; <span id="currentYear"></span> GA4 互動式指南。基於提供之簡報內容建構。</p>
        </footer>
    </div>

    <script>
        function openTab(event, tabId) {
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tc => tc.classList.remove('active'));

            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(tb => tb.classList.remove('active'));

            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        document.getElementById('currentYear').textContent = new Date().getFullYear();

        const userMetricsData = {
            labels: ['通用版 Analytics (UA)', 'Google Analytics 4 (GA4)'],
            datasets: [{
                label: '使用者數量概念比較',
                data: [100, 85], 
                backgroundColor: [
                    'rgba(54, 162, 235, 0.6)', // Blue for UA
                    'rgba(75, 192, 192, 0.6)'  // Teal for GA4
                ],
                borderColor: [
                    'rgba(54, 162, 235, 1)',
                    'rgba(75, 192, 192, 1)'
                ],
                borderWidth: 1
            }]
        };

        const userMetricsConfig = {
            type: 'bar',
            data: userMetricsData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: '相對使用者數量 (%)'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.y !== null) {
                                    label += context.parsed.y + '% (示意)';
                                }
                                if (context.label === '通用版 Analytics (UA)') {
                                     label += ' - 總使用者數';
                                } else if (context.label === 'Google Analytics 4 (GA4)') {
                                     label += ' - 活躍使用者數';
                                }
                                return label;
                            }
                        }
                    }
                }
            }
        };
        
        let userMetricsChartInstance = null;

        function renderUserMetricsChart() {
            const chartCanvas = document.getElementById('userMetricsChart');
            if (chartCanvas) {
                 if (userMetricsChartInstance) {
                    userMetricsChartInstance.destroy();
                }
                userMetricsChartInstance = new Chart(chartCanvas, userMetricsConfig);
            }
        }
        
        const comparisonData = [
            { feature: "資料模型", ua: "工作階段型 (Session-based)", ga4: "事件型 (Event-based)；所有互動皆為事件", impact: "GA4 提供更精細、更彈性的使用者行為追蹤" },
            { feature: "使用者", ua: "主要為「總使用者數」", ga4: "主要為「活躍使用者數」；「總使用者數」定義不同", impact: "比較使用者數量時需注意定義差異，GA4 更關注實際參與的使用者" },
            { feature: "頁面瀏覽", ua: "Pageviews；應用程式畫面瀏覽需在不同資源中追蹤", ga4: "Views；整合網站頁面瀏覽與應用程式畫面瀏覽", impact: "GA4 提供跨平台內容瀏覽的統一視圖" },
            { feature: "工作階段", ua: "午夜或新廣告活動參數會重新啟動工作階段", ga4: "工作階段不會因午夜或新廣告活動參數而重新啟動；採用統計估算", impact: "GA4 的工作階段更能反映連續的使用者互動；計數可能較 UA 低" },
            { feature: "跳出率", ua: "單頁工作階段且無互動的百分比", ga4: "非參與工作階段的百分比（參與率的相反）", impact: "GA4 的跳出率定義更貼近實際使用者參與情況，與 UA 跳出率不具可比性" },
            { feature: "參與率", ua: "無此指標", ga4: "參與工作階段（持續 >10秒、有主要事件或 >=2次瀏覽）的百分比", impact: "GA4 的核心指標，更有效地衡量使用者互動品質" },
            { feature: "轉換/主要事件", ua: "目標 (Goals)；每個目標在單一工作階段內計為一次", ga4: "主要事件 (Key Events)；預設情況下，每次發生皆計為一次（可調整）", impact: "GA4 的轉換追蹤更彈性，但預設計數方式與 UA 不同，可能導致轉換數差異" },
            { feature: "事件結構", ua: "類別 (Category)、動作 (Action)、標籤 (Label)", ga4: "事件名稱 + 多個參數 (Parameters)", impact: "GA4 事件結構更靈活，能捕捉更豐富的事件情境資訊，但無法直接對應 UA 的事件結構" }
        ];

        const comparisonTableBody = document.querySelector('#uaGa4ComparisonTable tbody');
        if (comparisonTableBody) {
            comparisonData.forEach(item => {
                const row = comparisonTableBody.insertRow();
                row.className = "border-b border-slate-200";
                
                const cellFeature = row.insertCell();
                cellFeature.className = "py-3 px-4 text-sm text-slate-700 font-medium";
                cellFeature.textContent = item.feature;

                const cellUa = row.insertCell();
                cellUa.className = "py-3 px-4 text-sm text-slate-600 hidden md:table-cell";
                cellUa.textContent = item.ua;

                const cellGa4 = row.insertCell();
                cellGa4.className = "py-3 px-4 text-sm text-slate-600 hidden md:table-cell";
                cellGa4.textContent = item.ga4;

                const detailsRow = comparisonTableBody.insertRow();
                detailsRow.className = "details-row bg-sky-50";
                const detailsCell = detailsRow.insertCell();
                detailsCell.colSpan = 3; 
                detailsCell.className = "p-3 text-xs text-sky-700";
                detailsCell.innerHTML = `
                    <strong class="block md:hidden">UA:</strong> <span class="block md:hidden mb-1">${item.ua}</span>
                    <strong class="block md:hidden">GA4:</strong> <span class="block md:hidden mb-2">${item.ga4}</span>
                    <strong>主要影響:</strong> ${item.impact}`;

                row.addEventListener('click', () => {
                    detailsRow.classList.toggle('visible');
                    row.classList.toggle('bg-sky-100');
                });
            });
        }

        const eventTypesData = [
            { 
                name: "自動收集的事件", 
                definition: "GA4 預設收集的基本互動。",
                collection: "啟用 GA4 追蹤碼後自動收集。",
                examples: "<code>session_start</code>, <code>first_visit</code>, <code>user_engagement</code>",
                params: "<code>page_view</code>: <code>page_location</code>, <code>engagement_time_msec</code>"
            },
            { 
                name: "加強型評估事件", 
                definition: "針對網站的特定互動，可透過介面開關啟用，無需修改程式碼。",
                collection: "在資料串流設定中啟用。",
                examples: "<code>scroll</code>, <code>click</code> (站外), <code>view_search_results</code>, <code>file_download</code>",
                params: "<code>click</code>: <code>link_url</code>, <code>outbound</code>"
            },
            { 
                name: "建議事件", 
                definition: "Google 針對常見情境建議的事件，具有預設名稱和參數，有助於啟用更豐富的報表功能。",
                collection: "需手動設定。",
                examples: "<code>purchase</code> (電商), <code>generate_lead</code> (潛在客戶開發), <code>login</code> (登入)",
                params: "<code>purchase</code>: <code>transaction_id</code>, <code>value</code>, <code>currency</code>, <code>items</code>"
            },
            { 
                name: "自訂事件", 
                definition: "使用者為滿足特定業務需求而自行定義的事件。",
                collection: "需手動設定。",
                examples: "<code>newsletter_signup</code>, <code>product_comparison</code>, <code>video_watched_75_percent</code>",
                params: "<code>newsletter_signup</code>: <code>form_location</code>, <code>signup_source</code>"
            }
        ];

        const eventTypesContainer = document.getElementById('eventTypesContainer');
        if (eventTypesContainer) {
            eventTypesData.forEach(event => {
                const card = document.createElement('div');
                card.className = 'event-card bg-white p-4 rounded-lg border border-slate-200 shadow-sm';
                card.innerHTML = `
                    <h4 class="text-md font-semibold text-sky-700 mb-2">${event.name}</h4>
                    <div class="event-card-details text-xs text-slate-600 space-y-1">
                        <p><strong>定義:</strong> ${event.definition}</p>
                        <p><strong>收集方式:</strong> ${event.collection}</p>
                        <p><strong>常見範例:</strong> ${event.examples}</p>
                        <p><strong>主要參數範例:</strong> ${event.params}</p>
                    </div>
                `;
                card.addEventListener('click', () => {
                    card.classList.toggle('open');
                });
                eventTypesContainer.appendChild(card);
            });
        }
        
        // Initial tab setup
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelector('.tab-button.active').click();
            // Delay chart rendering slightly to ensure canvas is ready if tab is immediately active
            setTimeout(renderUserMetricsChart, 100); 
        });


        // Re-render chart if tab2 becomes visible
        const observer = new MutationObserver((mutationsList, observer) => {
            for(const mutation of mutationsList) {
                if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                    const tab2Element = document.getElementById('tab2');
                    if (tab2Element && tab2Element.classList.contains('active')) {
                         // Check if chart canvas is available
                        if (document.getElementById('userMetricsChart')) {
                           renderUserMetricsChart();
                        }
                    }
                }
            }
        });

        const tab2Element = document.getElementById('tab2');
        if (tab2Element) {
            observer.observe(tab2Element, { attributes: true });
        }

    </script>
</body>
</html>
